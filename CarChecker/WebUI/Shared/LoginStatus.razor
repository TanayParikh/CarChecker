@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@inject NavigationManager Navigation
@inject ILocalVehiclesStore LocalVehiclesStore
@inject IStringLocalizer<HybridApp> Localize
@inject IAccountManager AccountManager

<AuthorizeView>
    <div class="username">
        <img src="_content/CarChecker/user.svg" />
        <div>
            <div><strong>@context.User.FirstName() @context.User.LastName()</strong></div>
            <div>@context.User.Email()</div>
        </div>
    </div>
    <div class="user-actions">
        <button type="button" class="text-button" @onclick="Profile">
            @Localize["Manage account"]
        </button>
        <button type="button" class="text-button" @onclick="LogOut">
            @Localize["Log out"]
        </button>
    </div>
</AuthorizeView>

@code {
    private async Task LogOut()
    {
        await LocalVehiclesStore.SaveUserAccountAsync(null);
        await AccountManager.SignOut();
    }

    private async Task Profile()
    {
        await AccountManager.Profile();
    }
}
